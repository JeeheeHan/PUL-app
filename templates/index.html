{% extends 'base.html' %}

{% block head %}
{% endblock head %}

{% block body %}
<section class="demo-1 container-fluid d-flex justify-content-center align-items-center">
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        <div>
          <div class="counter">
            <ul>
              <li>
                Positive:<span id = "pos">{{count["positive"]|tojson }}</span>
              </li>
              <li>
                Negative:<span id = "negative">{{count["negative"]|tojson }}</span>
              </li>
              <li>
                Total:<span id = "total">{{count["total"]|tojson }}</span>
              </li>
            </ul>
          </div>

          <div class="chat-container">
            {% for msg in messages %}
            <p>{{msg.user.username}}:{{ msg.message }} <span class="sentAt">{{msg.timestamp.strftime('%c')}}</span></p>
            {% endfor %}
            <div class="message_holder"></div>
          </div>
        </div>
        <div class="userType">
        {% if current_user.is_authenticated %}
        <form class= "chat">
          <input type="text" class="username" placeholder="User Name"/>
          <input type="text" class="message" placeholder="Messages"/>
          <input type="submit"/>
        </form>
        {% endif %}
        {% if current_user.is_anonymous%}
        <div>
          <span class="anonymousUser">Let's have you log in to start chatting away...</span>
        </div>
        {% endif %}
      </div>

      </div>
          <div class="col-md-4">
            <div class="thumbnail">
              <div class= "popup" id="testPopup">
                <span class="popuptext" id="myPopup">Message</span>
                <div id = "plant-img">
                  <img src= {{pic}} class="img" id="left" alt="Responsive image">
                </div></div>
              </div>
            </div>
                </div>
              <div class ="row">
                <p class="polarity">
                  Polarity:<span id="pClass"></span><span id="pPolar"></span>
                </p>
                <form action="/getPolarity" class="getPolar" >
                  <dl>
                    {{ form.csrf_token }}
                    {{ form.analysis.label }}:{{ with_errors(form.analysis) }}
                    {{ form.text.label }}:{{ with_errors(form.text) }}
                    {{ form.submit(class="button is-sucess")}}
                  </dl>
                </form>
                </div>
      </div>

</section>
<script type="text/javascript" src="/static/chatty.js"></script>


{% endblock %}